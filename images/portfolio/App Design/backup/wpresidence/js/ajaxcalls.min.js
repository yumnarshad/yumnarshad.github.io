
function wpestate_load_stats_tabs(a){var c=ajaxcalls_vars.admin_url+"admin-ajax.php";var b=jQuery("#wpestate_tab_stats").val();jQuery.ajax({type:"POST",url:c,dataType:"json",data:{action:"wpestate_load_stats_property",postid:a,security:b,},success:function(d){wpestate_show_prop_stat_graph_tab(d.array_values,d.labels,a)},error:function(d){}})}function wpestate_show_prop_stat_graph_tab(g,d,e){if(!document.getElementById("myChart")){return}var h=jQuery("#myChart").get(0).getContext("2d");var f=new Chart(h);var a="  ";a=g;var c={labels:d,datasets:[{label:ajaxcalls_vars.property_views,fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:a},]};var i={title:"page views",scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};var b=new Chart(h,{type:"bar",data:c,options:i})}function wpestate_load_stats(a){var c=ajaxcalls_vars.admin_url+"admin-ajax.php";var b=jQuery("#wpestate_tab_stats").val();jQuery.ajax({type:"POST",url:c,dataType:"json",data:{action:"wpestate_load_stats_property",postid:a,security:b,},success:function(d){wpestate_show_prop_stat_graph(d.array_values,d.labels,a)},error:function(d){}})}function wpestate_show_prop_stat_graph(d,h,f){var b=jQuery("#myChart_"+f).get(0).getContext("2d");var c=new Chart(b);var g={labels:h,datasets:[{label:ajaxcalls_vars.property_views,fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:d},]};var e={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};var a=new Chart(b,{type:"bar",data:g,options:e})}function wpestate_start_filtering_ajax(f){var l,k,m,p,r,a,g,d,j,b,e,h;l=jQuery("#adv_actions").attr("data-value");k=jQuery("#adv_categ").attr("data-value");m=jQuery("#advanced_city").attr("data-value");p=jQuery("#advanced_area").attr("data-value");r=parseFloat(jQuery("#adv_rooms").val(),10);a=parseFloat(jQuery("#adv_bath").val(),10);g=parseFloat(jQuery("#price_low").val(),10);d=parseFloat(jQuery("#price_max").val(),10);b=parseFloat(jQuery("#adv-search-1").attr("data-postid"),10);j=ajaxcalls_vars.admin_url+"admin-ajax.php";var n=jQuery("#a_filter_order").attr("data-value");e=0;var o=jQuery("#wpestate_ajax_filtering").val();if(jQuery("#google_map_prop_list_sidebar").length){e=1}b=1;if(document.getElementById("search_wrapper")){b=parseInt(jQuery("#search_wrapper").attr("data-postid"),10)}h="";jQuery('.search_wrapper .extended_search_check_wrapper  input[type="checkbox"]').each(function(){if(jQuery(this).is(":checked")){h=h+","+jQuery(this).attr("name-title")}});e=0;if(jQuery("#google_map_prop_list_sidebar").length){e=1}var i="";var q="";var c="";if(jQuery("#geolocation_search").length>0){i=jQuery("#geolocation_lat").val();q=jQuery("#geolocation_long").val();c=jQuery("#geolocation_radius").val()}jQuery("#listing_ajax_container").empty();jQuery("#listing_loader").show();jQuery.ajax({type:"POST",url:j,dataType:"json",data:{action:"wpestate_ajax_filter_listings_search",action_values:l,category_values:k,city:m,area:p,advanced_rooms:r,advanced_bath:a,price_low:g,price_max:d,newpage:f,postid:b,halfmap:e,all_checkers:h,geo_lat:i,geo_long:q,geo_rad:c,order:n,security:o},success:function(s){jQuery("#listing_loader").hide();jQuery(".listing_loader_title").show();jQuery(".pagination_nojax").hide();jQuery(".entry-title.title_prop").addClass("half_results").text(s.no_founs);jQuery("#listing_ajax_container").empty().append(s.cards);wpestate_restart_js_after_ajax()},error:function(s){}})}function wpestate_custom_search_start_filtering_ajax(m){var c,a,C,f,A,y,t,e,n,o,k,r,q;C=parseInt(mapfunctions_vars.fields_no,10);c=C;y=[];A=[];f=[];A=JSON.parse(JSON.stringify(mapfunctions_vars.slugs));f=JSON.parse(JSON.stringify(mapfunctions_vars.hows));var w=0;if(mapfunctions_vars.slider_price==="yes"){n=jQuery("#price_low").val();o=jQuery("#price_max").val()}w=jQuery(".tab-pane.active").find(".term_counter").val();if((mapfunctions_vars.adv_search_type==="6"||mapfunctions_vars.adv_search_type==="7")){q=jQuery(".tab-pane.active .term_id_class").val();if(mapfunctions_vars.slider_price==="yes"){n=jQuery("#price_low_"+q).val();o=jQuery("#price_max_"+q).val()}var h=w*mapfunctions_vars.fields_no;if(w>0){C=(C*w)+C}for(var v=h;v<C;v++){if(f[v]=="date bigger"||f[v]=="date smaller"){a=wpestate_get_custom_value_tab_search(q+A[v])}else{a=wpestate_get_custom_value_tab_search(A[v])}if(typeof(a)==="undefined"){a=""}y.push(a)}}else{for(var v=0;v<C;v++){a=wpestate_get_custom_value(A[v]);if(typeof(a)==="undefined"){a=""}y.push(a)}}if((mapfunctions_vars.adv_search_type==="6"||mapfunctions_vars.adv_search_type==="7"||mapfunctions_vars.adv_search_type==="8"||mapfunctions_vars.adv_search_type==="9")){var p=jQuery(".adv_search_tab_item.active").attr("data-tax");if(jQuery(".halfsearch")[0]){p=jQuery(".halfsearch").attr("data-tax")}if(p==="property_category"){A[C]="adv_categ"}else{if(p==="property_action_category"){A[C]="adv_actions"}else{if(p==="property_city"){A[C]="advanced_city"}else{if(p==="property_area"){A[C]="advanced_area"}else{if(p==="property_county_state"){A[C]="county-state"}}}}}f[C]="like";if(jQuery(".halfsearch")[0]&&mapfunctions_vars.adv_search_type==="8"){y[C]=jQuery("#"+A[C]).parent().find("input:hidden").val()}else{y[c]=jQuery(".adv_search_tab_item.active").attr("data-term")}}r="";if(mapfunctions_vars.adv_search_type==="6"){jQuery('.tab-pane.active .extended_search_check_wrapper  input[type="checkbox"]').each(function(){if(jQuery(this).is(":checked")){r=r+","+jQuery(this).attr("name-title")}})}else{jQuery('.search_wrapper .extended_search_check_wrapper  input[type="checkbox"]').each(function(){if(jQuery(this).is(":checked")){r=r+","+jQuery(this).attr("name-title")}})}k=0;if(jQuery("#google_map_prop_list_sidebar").length){k=1}e=1;if(document.getElementById("search_wrapper")){e=parseInt(jQuery("#search_wrapper").attr("data-postid"),10)}t=ajaxcalls_vars.wpestate_ajax;var l="";var z="";if(mapfunctions_vars.adv_search_type==="10"){l=jQuery("#adv_actions").attr("data-value");z=jQuery("#adv_location").val()}var j="";var d="";var b="";b=jQuery("#keyword").val();if(mapfunctions_vars.adv_search_type==="11"){j=jQuery("#adv_actions").attr("data-value");d=jQuery("#adv_categ").attr("data-value");b=jQuery("#keyword_search").val()}var s="";var B="";var g="";if(jQuery("#geolocation_search").length>0){s=jQuery("#geolocation_lat").val();B=jQuery("#geolocation_long").val();g=jQuery("#geolocation_radius").val()}var x=jQuery("#wpestate_ajax_filtering").val();var u=jQuery("#a_filter_order").attr("data-value");jQuery("#listing_ajax_container").empty();jQuery("#listing_loader").show();jQuery.ajax({type:"POST",url:t,dataType:"json",data:{action:"wpestate_custom_adv_ajax_filter_listings_search",val_holder:y,newpage:m,postid:e,slider_min:n,slider_max:o,halfmap:k,all_checkers:r,filter_search_action10:l,adv_location10:z,filter_search_action11:j,filter_search_categ11:d,keyword_search:b,geo_lat:s,geo_long:B,geo_rad:g,order:u,term_counter:w,security:x,},success:function(i){jQuery("#listing_loader").hide();jQuery(".listing_loader_title").show();jQuery(".entry-title.title_prop").addClass("half_results").text(i.no_founs);jQuery("#listing_ajax_container").empty().append(i.cards);wpestate_restart_js_after_ajax();jQuery(".col-md-12.listing_wrapper .property_unit_custom_element.image").each(function(){jQuery(this).parent().addClass("wrap_custom_image")})},error:function(i){}})}function wpestate_restart_js_after_ajax(){wpestate_lazy_load_carousel_property_unit();if(typeof wpestate_enable_half_map_pin_action=="function"){wpestate_enable_half_map_pin_action()}var e,b,d,a,c;jQuery(".pagination_ajax_search a").on("click",function(g){g.preventDefault();e=parseInt(jQuery(this).attr("data-future"),10);document.getElementById("scrollhere").scrollIntoView();if(mapfunctions_vars.custom_search==="yes"){wpestate_custom_search_start_filtering_ajax(e)}else{wpestate_start_filtering_ajax(e)}});jQuery(".pagination_ajax a").on("click",function(g){g.preventDefault();e=parseInt(jQuery(this).attr("data-future"),10);document.getElementById("scrollhere").scrollIntoView();wpestate_start_filtering(e)});jQuery(".property_listing").on("click",function(j){if(j.target.classList.contains("demo-icon")){return}console.log(j.target.classList);if(control_vars.property_modal==="1"&&!Modernizr.mq("only all and (max-width: 1024px)")){j.preventDefault();j.stopPropagation();scroll_modal_save=scroll_modal;var h=jQuery(this).parent().attr("data-listid");var k=jQuery(this).parent().attr("data-main-modal");var g=jQuery(this).parent().attr("data-modal-title");var i=jQuery(this).parent().attr("data-modal-link");wpestate_enable_property_modal(h,k,g,i)}else{if(control_vars.new_page_link==="_blank"){return}var i;i=jQuery(this).attr("data-link");window.open(i,"_self")}});jQuery(".share_unit").on("click",function(g){g.stopPropagation()});var f=[];jQuery(".compare-action").unbind("click");jQuery(".compare-action").on("click",function(h){h.stopPropagation();jQuery(".prop-compare").animate({right:"0px"});b=jQuery(this).attr("data-pid");for(var g=0;g<f.length;g++){if(f[g]===b){return}}f.push(b);d=jQuery(this).attr("data-pimage");a='<div class="items_compare ajax_compare" style="display:none;"><img src="'+d+'" class="img-responsive"><input type="hidden" value="'+b+'" name="selected_id[]" /></div>';jQuery("div.items_compare:first-child").css("background","red");if(parseInt(jQuery(".items_compare").length,10)>3){jQuery(".items_compare:first").remove()}jQuery("#submit_compare").before(a);jQuery(".items_compare").fadeIn(800)});jQuery("#submit_compare").unbind("click");jQuery("#submit_compare").on("click",function(g){jQuery("#form_compare").trigger("submit")});jQuery(".icon-fav").on("click",function(g){g.stopPropagation();c=jQuery(this);wpestate_add_remove_favorite(c)});jQuery(".share_list, .icon-fav, .compare-action").on("mouseenter",function(){jQuery(this).tooltip("show")}).on("mouseleave",function(){jQuery(this).tooltip("hide")});jQuery(".share_list").on("click",function(g){g.stopPropagation();var h=jQuery(this).parent().find(".share_unit");h.toggle();jQuery(this).toggleClass("share_on")});wpestate_grid_list_controls()}function wpestate_add_remove_favorite(d){var b,a,e;b=d.attr("data-postid");a=jQuery("#security-pass").val();e=ajaxcalls_vars.admin_url+"admin-ajax.php";var c=jQuery("#wpestate_ajax_filtering").val();if(parseInt(ajaxcalls_vars.userid,10)===0){if(!Modernizr.mq("only all and (max-width: 768px)")){jQuery(".login-links").show();jQuery("#modal_login_wrapper").show();jQuery("#modal_login_wrapper").find("[autofocus]").focus();jQuery("#loginpop").val("1")}else{jQuery(".mobile-trigger-user").trigger("click")}}else{d.toggleClass("icon-fav-off");d.toggleClass("icon-fav-on");jQuery.ajax({type:"POST",url:e,dataType:"json",data:{action:"wpestate_ajax_add_fav",post_id:b,security:c},success:function(f){if(f.added){d.removeClass("icon-fav-off").addClass("icon-fav-on");d.attr("data-original-title",ajaxcalls_vars.remove_fav)}else{if(d.hasClass("remove_fav_dash")){d.parents(".property_wrapper_dash").remove()}d.removeClass("icon-fav-on").addClass("icon-fav-off");d.attr("data-original-title",ajaxcalls_vars.add_favorite)}},error:function(f){}})}}function wpestate_resend_for_approval(e,a){var d,c;d=control_vars.admin_url+"admin-ajax.php";var b=jQuery("#wpestate_property_actions").val();jQuery.ajax({type:"POST",url:d,data:{action:"wpestate_ajax_resend_for_approval",propid:e,security:b},success:function(f){if(f==="pending"){a.parent().empty().append('<span class="featured_prop">Sent for approval</span>');c=parseInt(jQuery("#normal_list_no").text(),10);jQuery("#normal_list_no").text(c-1)}else{a.removeClass("resend_pending").html(f)}},error:function(f){}})}function wpestate_make_prop_featured(d,b){var c=ajaxcalls_vars.admin_url+"admin-ajax.php";var a=jQuery("#wpestate_property_actions").val();jQuery.ajax({type:"POST",url:c,data:{action:"wpestate_ajax_make_prop_featured",propid:d,security:a},success:function(f){if(f.trim()==="done"){b.empty().html('<span class="label label-success">'+ajaxcalls_vars.prop_featured+"</span>");var e=parseInt(jQuery("#featured_list_no").text(),10);jQuery("#featured_list_no").text(e-1)}else{b.empty().removeClass("make_featured").addClass("featured_exp").text(ajaxcalls_vars.no_prop_featured)}},error:function(e){}})}function wpestate_recuring_pay_pack_via_paypal(){var d,c,a;d=control_vars.admin_url+"admin-ajax.php";c=jQuery(".package_selected .pack-listing-title").text();a=jQuery(".package_selected .pack-listing-title").attr("data-packid");var b=jQuery("#wpestate_payments_nonce").val();jQuery.ajax({type:"POST",url:d,data:{action:"wpestate_ajax_paypal_pack_recuring_generation_rest_api",packName:c,packId:a,security:b},success:function(e){window.location.href=e},error:function(e){}})}jQuery(".buypackage").click(function(){var d,a,c,b;jQuery(".pack-listing").removeClass("package_selected");jQuery(".pack-listing input").prop("checked",false);jQuery(this).find(".input_pak_check").prop("checked",true);jQuery(this).parent().addClass("package_selected");c=jQuery(this).parent().find(".pack-listing-title").attr("data-stripetitle");a=jQuery(this).parent().find(".pack-listing-title").attr("data-stripetitle2");b=jQuery(this).parent().find(".pack-listing-title").attr("data-stripepay");d=jQuery(this).parent().find(".pack-listing-title").attr("data-packid");jQuery(".stripe_buttons").attr("id",a);jQuery("#stripe_script").attr("data-amount",b);jQuery("#stripe_script").attr("data-description",c);jQuery("#pack_id").val(d);jQuery("#pack_title").val(a);jQuery("#pay_ammout").val(b);jQuery("#stripe_form").attr("data-amount",b);jQuery(".wpestate_stripe_pay_desc").html(control_vars.stripe_pay_for+" "+a);jQuery("#wpestate_stripe_form_button_sumit").html(control_vars.stripe_pay+" "+b/100+" "+control_vars.submission_curency)});function wpestate_pay_pack_via_paypal(){var d,c,a;d=control_vars.admin_url+"admin-ajax.php";c=jQuery(".package_selected .pack-listing-title").text();a=jQuery(".package_selected .pack-listing-title").attr("data-packid");var b=jQuery("#wpestate_payments_nonce").val();jQuery.ajax({type:"POST",url:d,data:{action:"wpestate_ajax_paypal_pack_generation",packName:c,packId:a,security:b},success:function(e){window.location.href=e},error:function(e){}})}function wpestate_listing_pay(f,c,b,a){var e=control_vars.admin_url+"admin-ajax.php";var d=jQuery("#wpestate_payments_nonce").val();jQuery.ajax({type:"POST",url:e,data:{action:"wpestate_ajax_listing_pay",propid:f,is_featured:b,is_upgrade:a,security:d},success:function(g){window.location.href=g},error:function(g){}})}function wpestate_start_filtering(m){jQuery("#gmap-loading").show();jQuery("#grid_view").addClass("icon_selected");jQuery("#list_view").removeClass("icon_selected");var e,a,i,f,b,d,h,n;e=jQuery("#a_filter_action").attr("data-value");a=jQuery("#a_filter_categ").attr("data-value");i=jQuery("#a_filter_county").attr("data-value");f=jQuery("#a_filter_cities").attr("data-value");b=jQuery("#a_filter_areas").attr("data-value");d=jQuery("#a_filter_order").attr("data-value");h=ajaxcalls_vars.wpestate_ajax;n=jQuery("#page_idx").val();var l=jQuery(".wpestate_filter_list_properties_wrapper").attr("data-card_version");var c=jQuery(".wpestate_filter_list_properties_wrapper").attr("data-rownumber");var g=jQuery(".wpestate_filter_list_properties_wrapper").attr("data-ishortcode");var k="";if(jQuery(".wpestate_filter_list_properties_wrapper").length>0){jQuery(".wpestate_filter_list_properties_wrapper .listing_wrapper").remove();jQuery(".wpestate_filter_list_properties_wrapper .pagination_ajax").remove();jQuery(".wpestate_filter_list_properties_wrapper .no_results").remove();k=jQuery(".wpestate_filter_list_properties_wrapper").attr("data-align");jQuery("#listing_loader2").show()}else{jQuery("#listing_ajax_container").empty();jQuery("#listing_loader").show()}var j=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:h,dataType:"json",data:{action:"wpestate_ajax_filter_listings",action_values:e,category_values:a,county:i,city:f,area:b,order:d,newpage:m,page_id:n,align:k,card_version:l,rownumber:c,ishortcode:g,security:j},success:function(p){jQuery("#listing_loader").hide();if(jQuery(".wpestate_filter_list_properties_wrapper").length>0){jQuery("#listing_loader2").hide();jQuery(".wpestate_filter_list_properties_wrapper").append(p.to_show)}else{jQuery("#listing_ajax_container").empty().append(p.to_show)}jQuery(".pagination_nojax").hide();wpestate_restart_js_after_ajax();var o=parseInt(p.no_results);if(o!==0){wpestate_load_on_demand_pins(p.markers,o,0)}else{wpestate_show_no_results()}jQuery(".col-md-12.listing_wrapper .property_unit_custom_element.image").each(function(){jQuery(this).parent().addClass("wrap_custom_image")});jQuery("#gmap-loading").hide()},error:function(o){}})}function wpestate_change_pass_profile(){var b,d,c,a,e;b=jQuery("#oldpass").val();d=jQuery("#newpass").val();c=jQuery("#renewpass").val();a=jQuery("#security-pass").val();e=ajaxcalls_vars.admin_url+"admin-ajax.php";jQuery.ajax({type:"POST",url:e,data:{action:"wpestate_ajax_update_pass",oldpass:b,newpass:d,renewpass:c,"security-pass":a},success:function(f){jQuery("#profile_pass").empty().append('<div class="login-alert">'+f+"<div>");jQuery("#oldpass, #newpass, #renewpass").val("")},error:function(f){}})}function wpestate_register_user(i){var e,g,b,c,h,f,d,a;e="";d=ajaxcalls_vars.admin_url+"admin-ajax.php";jQuery("#register_message_area_topbar").empty().append('<div class="login-alert">'+control_vars.procesing+"</div>");if(i===1){if(control_vars.usecaptcha==="yes"){e=grecaptcha.getResponse(widgetId1)}g=jQuery("#user_login_register_topbar").val();b=jQuery("#user_email_register_topbar").val();f=jQuery("#security-register-topbar").val();if(ajaxcalls_vars.userpass==="yes"){c=jQuery("#user_password_topbar").val();h=jQuery("#user_password_topbar_retype").val()}a=jQuery("#new_user_type_topbar").val();if(!jQuery("#user_terms_register_topbar").is(":checked")){jQuery("#register_message_area_topbar").empty().append('<div class="login-alert">'+control_vars.terms_cond+"</div>");return}}else{if(i===2){if(control_vars.usecaptcha==="yes"){e=grecaptcha.getResponse(widgetId3)}g=jQuery("#user_login_register_wd").val();b=jQuery("#user_email_register_wd").val();f=jQuery("#security-register").val();if(ajaxcalls_vars.userpass==="yes"){c=jQuery("#user_password_wd").val();h=jQuery("#user_password_wd_retype").val()}a=jQuery("#new_user_type_wd").val();if(!jQuery("#user_terms_register_wd").is(":checked")){jQuery("#register_message_area_wd").empty().append('<div class="login-alert">'+control_vars.terms_cond+"</div>");return}}else{if(i===3){if(control_vars.usecaptcha==="yes"){e=grecaptcha.getResponse(widgetId4)}g=jQuery("#user_login_register").val();b=jQuery("#user_email_register").val();f=jQuery("#security-register").val();if(ajaxcalls_vars.userpass==="yes"){c=jQuery("#user_password").val();h=jQuery("#user_password_retype").val()}a=jQuery("#new_user_type").val();if(!jQuery("#user_terms_register_sh").is(":checked")){jQuery("#register_message_area").empty().append('<div class="login-alert">'+control_vars.terms_cond+"</div>");return}}else{if(i===5){if(control_vars.usecaptcha==="yes"){e=grecaptcha.getResponse(widgetId2)}g=jQuery("#user_login_register_mobile").val();b=jQuery("#user_email_register_mobile").val();f=jQuery("#security-register-mobile").val();if(ajaxcalls_vars.userpass==="yes"){c=jQuery("#user_password_mobile").val();h=jQuery("#user_password_mobile_retype").val()}a=jQuery("#new_user_type_mobile").val();if(!jQuery("#user_terms_register_mobile").is(":checked")){jQuery("#register_message_area_mobile").empty().append('<div class="login-alert">'+control_vars.terms_cond+"</div>");return}}}}}var f=jQuery("#wpestate_ajax_log_reg").val();jQuery.ajax({type:"POST",url:d,data:{action:"wpestate_ajax_register_user",user_login_register:g,user_email_register:b,user_pass:c,user_pass_retype:h,type:i,security:f,capthca:e,new_user_type:a},success:function(j){if(i===1){jQuery("#register_message_area_topbar").empty().append('<div class="login-alert">'+j+"</div>");jQuery("#user_login_register_topbar").val("");jQuery("#user_email_register_topbar").val("");jQuery("#user_password_topbar").val("");jQuery("#user_password_topbar_retype").val("");jQuery("#new_user_type_topbar").val("0")}else{if(i===2){jQuery("#register_message_area_wd").empty().append('<div class="login-alert">'+j+"</div>");jQuery("#user_login_register_wd").val("");jQuery("#user_email_register_wd").val("");jQuery("#user_password_wd").val("");jQuery("#user_password_wd_retype").val("");jQuery("#new_user_type_wd").val("0")}else{if(i===3){jQuery("#register_message_area").empty().append('<div class="login-alert">'+j+"</div>");jQuery("#user_login_register").val("");jQuery("#user_email_register").val("");jQuery("#user_password").val("");jQuery("#user_password_retype").val("");jQuery("#new_user_type").val("0")}else{if(i===5){jQuery("#register_message_area_mobile").empty().append('<div class="login-alert">'+j+"</div>");jQuery("#user_login_register_mobile").val("");jQuery("#user_email_register_mobile").val("");jQuery("#user_password_mobile").val("");jQuery("#user_password_mobile_retype").val("");jQuery("#new_user_type_mobile").val("0")}}}}},error:function(j){}})}function wpestate_forgot(b){var c,d,f,e;f=jQuery("#postid").val();if(b===1){c=jQuery("#forgot_email").val();d=jQuery("#security-forgot").val()}if(b===2){c=jQuery("#forgot_email_topbar").val();d=jQuery("#security-forgot-topbar").val()}if(b===3){c=jQuery("#forgot_email_shortcode").val();d=jQuery("#security-login-forgot_wd").val()}if(b===5){c=jQuery("#forgot_email_mobile").val();d=jQuery("#security-forgot-mobile").val();f=jQuery("#postid-mobile").val()}f=jQuery("#postid").val();e=ajaxcalls_vars.admin_url+"admin-ajax.php";var a=jQuery("#wpestate_ajax_log_reg").val();jQuery.ajax({type:"POST",url:e,data:{action:"wpestate_ajax_forgot_pass",forgot_email:c,security:a,postid:f,type:b,security:a},success:function(g){if(b===1){jQuery("#forgot_email").val("");jQuery("#forgot_pass_area").empty().append('<div class="login-alert">'+g+"<div>")}if(b===2){jQuery("#forgot_email_topbar").val("");jQuery("#forgot_pass_area_topbar").empty().append('<div class="login-alert">'+g+"<div>")}if(b===3){jQuery("#forgot_email_shortcode").val("");jQuery("#forgot_pass_area_shortcode").empty().append('<div class="login-alert">'+g+"<div>")}if(b===5){jQuery("#forgot_email_mobile").val("");jQuery("#forgot_pass_area_mobile").empty().append('<div class="login-alert">'+g+"<div>")}},error:function(g){}})}function wpestate_login_wd(){var e,c,a,f,d;e=jQuery("#login_user_wd").val();c=jQuery("#login_pwd_wd").val();d=jQuery("#security-login").val();a=jQuery("#loginpop_wd").val();f=ajaxcalls_vars.admin_url+"admin-ajax.php";jQuery("#login_message_area_wd").empty().append('<div class="login-alert">'+ajaxcalls_vars.login_loading+"</div>");var b=jQuery("#wpestate_ajax_log_reg").val();jQuery.ajax({type:"POST",dataType:"json",url:f,data:{action:"wpestate_ajax_loginx_form",login_user:e,login_pwd:c,ispop:a,security:b},success:function(g){jQuery("#login_message_area_wd").empty().append('<div class="login-alert">'+g.message+"<div>");if(g.loggedin===true){if(parseInt(g.ispop,10)===1){ajaxcalls_vars.userid=g.newuser;jQuery("#ajax_login_container").remove()}else{document.location.href=ajaxcalls_vars.login_redirect}jQuery("#user_not_logged_in").hide();jQuery("#user_logged_in").show()}else{jQuery("#login_user").val("");jQuery("#login_pwd").val("")}},error:function(g){}})}function wpestate_login_topbar(){var e,c,a,f,d,a;e=jQuery("#login_user_topbar").val();c=jQuery("#login_pwd_topbar").val();d=jQuery("#security-login-topbar").val();f=ajaxcalls_vars.admin_url+"admin-ajax.php";a=jQuery("#loginpop").val();if(jQuery("#loginpop_submit").val()==="3"){a=3}jQuery("#login_message_area_topbar").empty().append('<div class="login-alert">'+ajaxcalls_vars.login_loading+"</div>");var b=jQuery("#wpestate_ajax_log_reg").val();jQuery.ajax({type:"POST",dataType:"json",url:f,data:{action:"wpestate_ajax_loginx_form_topbar",login_user:e,login_pwd:c,ispop:a,security:b},success:function(g){jQuery("#login_message_area_topbar").empty().append('<div class="login-alert">'+g.message+"<div>");if(g.loggedin===true){if(parseInt(g.ispop,10)===1){ajaxcalls_vars.userid=g.newuser;jQuery("#user_menu_u.user_not_loged").unbind("click");jQuery("#user_menu_u").removeClass("user_not_loged").addClass("user_loged");jQuery("#modal_login_wrapper").hide();wp_estate_update_menu_bar(g.newuser);wpestate_open_menu()}else{if(parseInt(g.ispop,10)===2){location.reload()}else{if(parseInt(g.ispop,10)===3){ajaxcalls_vars.userid=g.newuser;jQuery("#user_menu_u.user_not_loged").unbind("click");jQuery("#user_menu_u").removeClass("user_not_loged").addClass("user_loged");jQuery("#modal_login_wrapper").hide();wp_estate_update_menu_bar(g.newuser);wpestate_open_menu()}else{document.location.href=ajaxcalls_vars.login_redirect}}}}else{jQuery("#login_user").val("");jQuery("#login_pwd").val("")}},error:function(g){}})}function wpestate_login_mobile(){var e,c,a,f,d;e=jQuery("#login_user_mobile").val();c=jQuery("#login_pwd_mobile").val();d=jQuery("#security-login-mobile").val();f=ajaxcalls_vars.admin_url+"admin-ajax.php";jQuery("#login_message_area_mobile").empty().append('<div class="login-alert">'+ajaxcalls_vars.login_loading+"</div>");var b=jQuery("#wpestate_ajax_log_reg").val();jQuery.ajax({type:"POST",dataType:"json",url:f,data:{action:"wpestate_ajax_loginx_form_mobile",login_user:e,login_pwd:c,security:b},success:function(g){jQuery("#login_message_area_mobile").empty().append('<div class="login-alert">'+g.message+"<div>");if(g.loggedin===true){if(parseInt(jQuery("#loginpop").val(),10)===2){location.reload()}else{document.location.href=ajaxcalls_vars.login_redirect}}else{jQuery("#login_user_mobile").val("");jQuery("#login_pwd_mobile").val("")}},error:function(g){}})}function wpestate_login(){var e,c,d,a,f;e=jQuery("#login_user").val();c=jQuery("#login_pwd").val();d=jQuery("#security-login").val();a=jQuery("#loginpop").val();f=ajaxcalls_vars.admin_url+"admin-ajax.php";jQuery("#login_message_area").empty().append('<div class="login-alert">'+ajaxcalls_vars.login_loading+"</div>");var b=jQuery("#wpestate_ajax_log_reg").val();jQuery.ajax({type:"POST",dataType:"json",url:f,data:{action:"wpestate_ajax_loginx_form",login_user:e,login_pwd:c,ispop:a,security:b},success:function(g){jQuery("#login_message_area").empty().append('<div class="login-alert">'+g.message+"<div>");if(g.loggedin===true){if(parseInt(g.ispop,10)===1){ajaxcalls_vars.userid=g.newuser;jQuery("#loginmodal").modal("hide");wp_estate_update_menu_bar(g.newuser)}else{document.location.href=ajaxcalls_vars.login_redirect}jQuery("#user_not_logged_in").hide();jQuery("#user_logged_in").show()}else{jQuery("#login_user").val("");jQuery("#login_pwd").val("")}},error:function(g){}})}function wp_estate_update_menu_bar(b){var a,d;d=control_vars.admin_url+"admin-ajax.php";var c=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",dataType:"json",url:d,data:{action:"wpestate_update_menu_bar",newuser:b,security:c},success:function(e){jQuery("#user_menu_u").after(e.menu);a='<a class="navicon-button x"><div class="navicon"></div></a><div class="menu_user_picture" style="background-image: url('+e.picture+')"></div>';jQuery("#user_menu_u").append(a).addClass("user_loged");jQuery(".submit_action").remove();jQuery(".submit_listing").remove();jQuery("#agent_property_ajax_nonce").val(e.nonce_contact)},error:function(e){}})}jQuery(document).ready(function(a){wpestate_add_to_favorites();a(".wpestate_social_login").on("click",function(){var e=ajaxcalls_vars.admin_url+"admin-ajax.php";var d=a(this).attr("data-social");var c=a(this).parent().find(".wpestate_social_login_nonce").val();a.ajax({type:"POST",url:e,data:{action:"wpestate_social_login_generate_link",social_type:d,nonce:c},success:function(f){window.location.href=f},error:function(f){}})});a(".developer_listing .term_bar_item").on("click",function(g){var d=a(this).parents(".single_listing_block");a(".load_more_ajax_cont .listing_load_more",d).fadeIn();a(".term_bar_item").removeClass("active_term");a(this).addClass("active_term");var j=ajaxcalls_vars.admin_url+"admin-ajax.php";var i=a(this).attr("data-term_name");var c=a(".term_bar_wrapper").attr("data-agency_id");var e=a(".term_bar_wrapper").attr("data-post_id");var h=0;var f=jQuery("#wpestate_developer_listing_nonce").val();if(a(".single-estate_agency").length>0){h=1}a(".agency_listings_wrapper").empty();a("#listing_loader").show();a.ajax({type:"POST",url:j,data:{action:"wpestate_agency_listings",term_name:i,agency_id:c,post_id:e,is_agency:h,security:f},success:function(k){a("#listing_loader").hide();a(".agency_listings_wrapper").append(k);wpestate_restart_js_after_ajax()},error:function(k){}})});a(".agent_listing .term_bar_item").on("click",function(f){var c=a(this).parents(".single_listing_block");a(".load_more_ajax_cont .listing_load_more",c).fadeIn();a(".term_bar_item").removeClass("active_term");a(this).addClass("active_term");var i=ajaxcalls_vars.admin_url+"admin-ajax.php";var h=a(this).attr("data-term_name");var g=a(".term_bar_wrapper").attr("data-agent_id");var d=a(".term_bar_wrapper").attr("data-post_id");var e=jQuery("#wpestate_agent_listings_nonce").val();a(".agency_listings_wrapper").empty();a("#listing_loader",c).show();a.ajax({type:"POST",url:i,data:{action:"wpestate_agent_listings",term_name:h,agent_id:g,post_id:d,security:e,},success:function(j){a("#listing_loader",c).hide();a(".agency_listings_wrapper").append(j);wpestate_restart_js_after_ajax()},error:function(j){}})});a("body").on("click",".listing_load_more",function(e){var d=a(this);var l=a(this).parents(".single_listing_block");var m=a(".agency_listings_wrapper .listing_wrapper",l).length;var k=a(".active_term",l);var i=ajaxcalls_vars.admin_url+"admin-ajax.php";var c=a(k).attr("data-term_name");var h=a(".term_bar_wrapper",l).attr("data-agent_id");var f=a(".term_bar_wrapper",l).attr("data-post_id");var n=a(".term_bar_wrapper",l).attr("data-agency_id");var o=0;if(a(".single-estate_agency").length>0){o=1}a("#listing_loader",l).fadeIn();if(h){var g="wpestate_agent_listings";var j=jQuery("#wpestate_agent_listings_nonce").val()}if(n){var g="wpestate_agency_listings";var j=jQuery("#wpestate_developer_listing_nonce").val()}a.ajax({type:"POST",url:i,data:{action:g,term_name:c,agent_id:h,agency_id:n,post_id:f,loaded:m,is_agency:o,security:j},success:function(q){a("#listing_loader",l).fadeOut();var p=(q.match(/is/g)||[]).length;if(p===0){d.fadeOut()}else{a(".agency_listings_wrapper").append(q)}wpestate_restart_js_after_ajax()},error:function(p){}})});a("#stripe_cancel").on("click",function(e){var c,f;c=a(this).attr("data-stripeid");f=ajaxcalls_vars.admin_url+"admin-ajax.php";a("#stripe_cancel").text(ajaxcalls_vars.saving);var d=jQuery("#wpestate_stripe_cancel_nonce").val();a.ajax({type:"POST",url:f,data:{action:"wpestate_cancel_stripe",stripe_customer_id:c,security:d,},success:function(g){a("#stripe_cancel").text(ajaxcalls_vars.stripecancel)},error:function(g){}})});a(".resend_pending").on("click",function(c){var d=a(this).attr("data-listingid");wpestate_resend_for_approval(d,a(this))});jQuery("#wpestate_stripe_booking_recurring").on("click",function(){var c=jQuery(this).attr("data-modalid");jQuery("#"+c).show();jQuery("#"+c+" .wpestate_stripe_form_1").show();wpestate_start_stripe(1,c)});a("#pick_pack").on("click",function(d){var c;c='<div class="modal fade" id="paypal_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body listing-submit">'+ajaxcalls_vars.paypal+"</div></div></div></div></div>";jQuery("body").append(c);jQuery("#paypal_modal").modal();if(a("#pack_recuring").is(":checked")){wpestate_recuring_pay_pack_via_paypal()}else{wpestate_pay_pack_via_paypal()}});a(".listing_submit_normal").on("click",function(f){var h,g,d,c,e;e='<div class="modal fade" id="paypal_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body listing-submit">'+ajaxcalls_vars.paypal+"</div></div></div></div></div>";jQuery("body").append(e);jQuery("#paypal_modal").modal();h=a(this).attr("data-listingid");g=a(this).parent().find("input");d=0;c=0;if(g.prop("checked")){d=1}else{d=0}wpestate_listing_pay(h,a(this),d,c)});jQuery(".woo_pay_submit").on("click",function(){var c,f,g,h,j,k,e,d,l,i;f=jQuery(this).attr("data-propid");d=jQuery(this).attr("data-deposit");j=jQuery(this).attr("data-is_featured");i=jQuery(".package_selected").attr("data-id");k=0;l=1;if(jQuery("#open_packages").length>0){l=0}g="";h="";e=ajaxcalls_vars.admin_url+"admin-ajax.php";jQuery.ajax({type:"POST",url:e,data:{action:"wpestate_woo_pay",propid:f,depozit:d,is_submit:l,is_featured:j,pack_id:i,book_id:g,invoiceid:h,},success:function(m){if(m!==false){window.location.href=ajaxcalls_vars.checkout_url}},error:function(m){}})});a(".listing_upgrade").on("click",function(e){var c,d,f;c=1;d=0;f=a(this).attr("data-listingid");wpestate_listing_pay(f,a(this),d,c)});wpestate_agent_submit_email();wpestate_agent_submit_internal_mess();wpestate_theme_slider_show_contact();wpestate_enable_schedule_contact();a(".listing_filters_head li").on("click",function(e){var d,f,c;d=a(this).text();f=a(this).attr("data-value");c=a(this).parent().parent();c.find(".filter_menu_trigger").text(d).append('<span class="caret caret_filter"></span>').attr("data-value",f);c.find("input:hidden").val(f);wpestate_start_filtering(1)});a(".adv_listing_filters_head li").on("click",function(h){var g,i,f,d,c,j;j=ajaxcalls_vars.admin_url+"admin-ajax.php";g=a(this).text();i=a(this).attr("data-value");f=a(this).parent().parent();f.find(".filter_menu_trigger").text(g).append('<span class="caret caret_filter"></span>').attr("data-value",i);d=a("#searcharg").val();c=a("#page_idx").val();a("#listing_ajax_container").empty();a("#listing_loader").show();var e=jQuery("#wpestate_search_nonce").val();a.ajax({type:"POST",url:j,data:{action:"wpestate_advanced_search_filters",args:d,value:i,page_id:c,security:e},success:function(k){a("#listing_loader").hide();a("#listing_ajax_container").append(k);wpestate_restart_js_after_ajax();b()},error:function(k){}})});function b(){var c=a("#a_filter_order").attr("data-value");jQuery(".pagination a").each(function(){var d=a(this).attr("href");d=d+"&order_search="+c;a(this).attr("href",d)})}a(".icon-fav,.remove_fav_dash").on("click",function(d){d.stopPropagation();var c=a(this);wpestate_add_remove_favorite(c)});a(".icon-fav-on-remove").on("click",function(c){c.stopPropagation();a(this).parent().parent().remove()});a("#wp-submit-register").on("click",function(c){wpestate_register_user(3)});jQuery("#user_email_register, #user_login_register, #user_password, #user_password_retype").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_register_user(3)}});a("#wp-submit-register_wd").on("click",function(){wpestate_register_user(2)});a("#user_email_register_wd, #user_login_register_wd").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_register_user(2)}});a("#wp-submit-register_topbar").on("click",function(){wpestate_register_user(1)});a("#user_email_register_topbar, #user_login_register_topbar, #user_password_topbar, #user_password_topbar_retype").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_register_user(1)}});a("#wp-submit-register_mobile").on("click",function(){wpestate_register_user(5)});a("#user_email_register_mobile, #user_login_register_mobile, #user_password_mobile, #user_password_mobile_retype").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_register_user(5)}});a("#forgot_pass").on("click",function(c){c.preventDefault();a("#login-div").hide();a("#forgot-pass-div-sh").show()});a("#return_login").on("click",function(c){c.preventDefault();a("#forgot-pass-div-sh").hide();a("#login-div").show()});a("#forgot_pass_topbar").on("click",function(c){c.preventDefault();a("#login-div_topbar,#login-div-title-topbar,#register-div-topbar,#login-div_topbar,#register-div-title-topbar").hide();a("#forgot-div-title-topbar,#forgot-pass-div").show().find("[autofocus]").focus();a("#forgot_pass_topbar").hide()});a("#forgot_pass_mobile").on("click",function(c){c.preventDefault();a("#login-div_mobile,#login-div-title-mobile").hide();a("#forgot-div-title-mobile,#forgot-pass-div-mobile").show().find("[autofocus]").focus()});a("#return_login_topbar").on("click",function(c){c.preventDefault();a("#forgot-div-title-topbar,#forgot-pass-div").hide();a("#login-div_topbar,#login-div-title-topbar").show().find("[autofocus]").focus()});a("#return_login_mobile").on("click",function(c){c.preventDefault();a("#forgot-div-title-mobile,#forgot-pass-div-mobile").hide();a("#login-div_mobile,#login-div-title-mobile").show().find("[autofocus]").focus()});a("#forgot_pass_widget").on("click",function(c){c.preventDefault();a("#login-div-title,#login-div").hide();a("#forgot-pass-div_shortcode,#forgot-div-title_shortcode").show().find("[autofocus]").focus()});a("#return_login_shortcode").on("click",function(c){c.preventDefault();a("#forgot-pass-div_shortcode,#forgot-div-title_shortcode").hide();a("#login-div-title,#login-div").show().find("[autofocus]").focus()});a("#wp-forgot-but").on("click",function(){wpestate_forgot(1)});a("#wp-forgot-but-topbar").on("click",function(){wpestate_forgot(2)});a("#wp-forgot-but-mobile").on("click",function(){wpestate_forgot(5)});a("#wp-forgot-but_shortcode").on("click",function(){wpestate_forgot(3)});a("#forgot_email").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_forgot(1)}});a("#forgot_email_topbar").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_forgot(2)}});a("#forgot_email_topbar").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_forgot(3)}});a("#widget_register_topbar").on("click",function(c){c.preventDefault();a("#login-div_topbar,#widget_register_topbar,#login-div-title-topbar,#forgot-div-title-topbar,#forgot-pass-div").hide();a("#register-div-topbar,#register-div-title-topbar,#widget_login_topbar,#forgot_pass_topbar").show().find("[autofocus]").focus()});a("#widget_login_topbar").on("click",function(c){c.preventDefault();a("#login-div_topbar,#widget_register_topbar,#login-div-title-topbar,#forgot_pass_topbar").show().find("[autofocus]").focus();a("#register-div-topbar,#register-div-title-topbar,#widget_login_topbar,#forgot-div-title-topbar,#forgot-pass-div").hide()});a("#widget_register_mobile").on("click",function(c){c.preventDefault();a("#login-div_mobile").hide();a("#register-div-mobile").show().find("[autofocus]").focus();a("#login-div-title-mobile").hide();a("#register-div-title-mobile").show()});a("#widget_login_mobile").on("click",function(c){c.preventDefault();a("#login-div_mobile").show().find("[autofocus]").focus();a("#register-div-mobile").hide();a("#login-div-title-mobile").show();a("#register-div-title-mobile").hide()});a("#widget_register_sw").on("click",function(c){c.preventDefault();a(".loginwd_sidebar #login-div").hide();a(".loginwd_sidebar #register-div").show().find("[autofocus]").focus();a(".loginwd_sidebar #login-div-title").hide();a(".loginwd_sidebar #register-div-title").show()});a("#widget_login_sw").on("click",function(c){c.preventDefault();a(".loginwd_sidebar #register-div").hide();a(".loginwd_sidebar #login-div").show().find("[autofocus]").focus();a(".loginwd_sidebar #register-div-title").hide();a(".loginwd_sidebar #login-div-title").show()});a("#wp-login-but").on("click",function(){wpestate_login()});a("#login_pwd, #login_user").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_login()}});a("#wp-login-but-wd").on("click",function(){wpestate_login_wd()});a("#login_pwd_wd, #login_user_wd").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_login_wd()}});jQuery(".show_hide_password").on("click",function(){var c=jQuery(this).parent().find(":input");if(c.attr("type")==="password"){c.attr("type","text");jQuery(this).removeClass("fa-eye-slash").addClass("fa-eye")}else{c.attr("type","password");jQuery(this).removeClass("fa-eye").addClass("fa-eye-slash")}});a("#wp-login-but-topbar").on("click",function(){wpestate_login_topbar()});a("#login_pwd_topbar, #login_user_topbar").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_login_topbar()}});a("#wp-login-but-mobile").on("click",function(){wpestate_login_mobile()});a("#login_pwd_mobile, #login_user_mobile").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_login_mobile()}});a("#oldpass, #newpass, #renewpass").keydown(function(c){if(c.keyCode===13){c.preventDefault();wpestate_change_pass_profile()}});a("#change_pass").on("click",function(c){wpestate_change_pass_profile()});a("#register_agent").on("click",function(C){var G=a("#firstname").val();var x=a("#secondname").val();var q=a("#useremail").val();var J=a("#userphone").val();var t=a("#usermobile").val();var w=a("#userskype").val();var y=a("#usertitle").val();var B=a("#about_me").val();var I=a("#userfacebook").val();var E=a("#usertwitter").val();var f=a("#userlinkedin").val();var u=a("#userpinterest").val();var p=a("#userinstagram").val();var g=a("#website").val();var n=a("#agent_username").val();var e=a("#agent_password").val();var r=a("#agent_repassword").val();var m=a("#agent_category_submit").val();var D=a("#agent_action_submit").val();var i=a("#agent_city").val();var H=a("#agent_county").val();var h=a("#agent_member").val();var k=a("#agent_area").val();var l=a("#is_agent_edit").val();var d=a("#user_id").val();var v=a("#agent_id").val();var z=ajaxcalls_vars.admin_url+"admin-ajax.php";var A=a("#security-profile").val();var c=a("#upload_picture").val();var j=a("#profile-image").attr("data-profileurl");var s=a("#profile-image").attr("data-smallprofileurl");var K=[];a(".single_parameter_row .agent_custom_label").each(function(){K.push(a(this).val())});var o=[];a(".single_parameter_row .agent_custom_value").each(function(){o.push(a(this).val())});var F=jQuery("#wpestate_register_agent_nonce").val();window.scrollTo(0,0);a("#profile_message").empty().append('<div class="login-alert">'+ajaxcalls_vars.saving+"<div>");a.ajax({type:"POST",url:z,dataType:"json",data:{action:"wpestate_ajax_register_agent",agent_username:n,agent_password:e,agent_repassword:r,firstname:G,secondname:x,useremail:q,userphone:J,usermobile:t,userskype:w,usertitle:y,description:B,upload_picture:c,"security-profile":A,profile_image_url:j,profile_image_url_small:s,userfacebook:I,usertwitter:E,userlinkedin:f,userpinterest:u,userinstagram:p,userurl:g,agent_category_submit:m,agent_action_submit:D,agent_city:i,agent_county:H,agent_area:k,agentedit:l,userid:d,agentid:v,agent_member:h,agent_custom_label:K,agent_custom_value:o,security:F},success:function(L){a("#profile_message").empty().append('<div class="login-alert">'+L.mesaj+"<div>");if(L.added){setTimeout(function(){window.open(ajaxcalls_vars.agent_list,"_self",false)},1500)}},error:function(L){}})});a("#update_profile").on("click",function(x){var B,s,f,o,m,q,e,z,D,i,p,B,s,n,E,r,t,w,u,v,c;B=a("#firstname").val();s=a("#secondname").val();n=a("#useremail").val();E=a("#userphone").val();o=a("#usermobile").val();r=a("#userskype").val();t=a("#usertitle").val();w=a("#about_me").val();D=a("#userfacebook").val();z=a("#usertwitter").val();e=a("#userlinkedin").val();q=a("#userpinterest").val();m=a("#userinstagram").val();f=a("#website").val();var d=a("#hubspot_api").val();var g=a("#agent_member").val();var k=a("#agent_category_submit").val();var y=a("#agent_action_submit").val();var h=a("#agent_city").val();var C=a("#agent_county").val();var j=a("#agent_area").val();var A=jQuery("#wpestate_update_profile_nonce").val();u=ajaxcalls_vars.admin_url+"admin-ajax.php";v=a("#security-profile").val();c=a("#upload_picture").val();i=a("#profile-image").attr("data-profileurl");p=a("#profile-image").attr("data-smallprofileurl");var F=[];a(".single_parameter_row .agent_custom_label").each(function(){F.push(a(this).val())});var l=[];a(".single_parameter_row .agent_custom_value").each(function(){l.push(a(this).val())});window.scrollTo(0,0);a("#profile_message").append('<div class="login-alert">'+ajaxcalls_vars.saving+"<div>");a.ajax({type:"POST",url:u,data:{action:"wpestate_ajax_update_profile",firstname:B,secondname:s,useremail:n,userphone:E,usermobile:o,userskype:r,usertitle:t,description:w,upload_picture:c,"security-profile":v,profile_image_url:i,profile_image_url_small:p,userfacebook:D,usertwitter:z,userlinkedin:e,userpinterest:q,userinstagram:m,userurl:f,agent_category_submit:k,agent_action_submit:y,agent_city:h,agent_county:C,agent_area:j,agent_member:g,agent_custom_label:F,agent_custom_value:l,hubspot_api:d,security:A,},success:function(G){a("#profile_message").empty().append('<div class="login-alert">'+G+"<div>");window.scrollTo(0,0)},error:function(G){}})});a("#update_profile_agency").on("click",function(){var g,q,I,w,y,E,F,d,v,e,e,j,G,B,A,K,h,n,l,o,f,z,H,i,m,D,r,k,J,p,s,x,t,u,c;K=a("#agency_title").val();k=a("#useremail").val();J=a("#userphone").val();n=a("#usermobile").val();p=a("#userskype").val();x=a("#about_me").val();H=a("#userfacebook").val();z=a("#usertwitter").val();f=a("#userlinkedin").val();o=a("#userpinterest").val();l=a("#userinstagram").val();A=a("#agency_languages").val();B=a("#agency_website").val();G=a("#agency_taxes").val();I=a("#agency_license").val();j=a("#agency_category_submit").val();e=a("#agency_action_submit").val();v=a("#agency_city").val();d=a("#agency_county").val();F=a("#agency_area").val();E=a("#agency_address").val();y=a("#agency_lat").val();w=a("#agency_long").val();q=a("#agency_opening_hours ").val();g=a("#hubspot_api ").val();u=a("#security-profile").val();c=a("#upload_picture").val();i=a("#profile-image").attr("data-profileurl");m=a("#profile-image").attr("data-smallprofileurl");t=ajaxcalls_vars.admin_url+"admin-ajax.php";var C=jQuery("#wpestate_update_profile_nonce").val();window.scrollTo(0,0);a.ajax({type:"POST",url:t,data:{action:"wpestate_ajax_update_profile_agency",agency_name:K,useremail:k,userphone:J,usermobile:n,userskype:p,usertitle:s,description:x,upload_picture:c,"security-profile":u,profile_image_url:i,profile_image_url_small:m,userfacebook:H,usertwitter:z,userlinkedin:f,userpinterest:o,userinstagram:l,userurl:h,agency_languages:A,agency_website:B,agency_taxes:G,agency_license:I,agency_category_submit:j,agency_action_submit:e,agency_city:v,agency_county:d,agency_area:F,agency_address:E,agency_lat:y,agency_opening_hours:q,agency_long:w,hubspot_api:g,security:C},success:function(L){a("#profile_message").append('<div class="login-alert">'+L+"<div>");window.scrollTo(0,0)},error:function(L){}})});a("#update_profile_developer").on("click",function(){var i,k,f,n,e,m,G,g,B,B,J,H,d,w,q,j,s,p,t,h,C,F,l,r,E,v,o,I,u,x,A,y,z,c;q=a("#developer_title").val();o=a("#useremail").val();I=a("#userphone").val();s=a("#usermobile").val();u=a("#userskype").val();A=a("#about_me").val();F=a("#userfacebook").val();C=a("#usertwitter").val();h=a("#userlinkedin").val();t=a("#userpinterest").val();p=a("#userinstagram").val();w=a("#developer_languages").val();d=a("#developer_website").val();H=a("#developer_taxes").val();k=a("#developer_license").val();J=a("#developer_category_submit").val();B=a("#developer_action_submit").val();g=a("#developer_city").val();G=a("#developer_county").val();m=a("#developer_area").val();e=a("#developer_address").val();n=a("#developer_lat").val();f=a("#developer_long").val();z=a("#security-profile").val();c=a("#upload_picture").val();l=a("#profile-image").attr("data-profileurl");r=a("#profile-image").attr("data-smallprofileurl");i=a("#hubspot_api").val();y=ajaxcalls_vars.admin_url+"admin-ajax.php";var D=jQuery("#wpestate_update_profile_nonce").val();window.scrollTo(0,0);a.ajax({type:"POST",url:y,data:{action:"wpestate_ajax_update_profile_developer",developer_name:q,useremail:o,userphone:I,usermobile:s,userskype:u,usertitle:x,description:A,upload_picture:c,"security-profile":z,profile_image_url:l,profile_image_url_small:r,userfacebook:F,usertwitter:C,userlinkedin:h,userpinterest:t,userinstagram:p,userurl:j,developer_languages:w,developer_website:d,developer_taxes:H,developer_license:k,developer_category_submit:J,developer_action_submit:B,developer_city:g,developer_county:G,developer_area:m,developer_address:e,developer_lat:n,developer_long:f,hubspot_api:i,security:D},success:function(K){a("#profile_message").append('<div class="login-alert">'+K+"<div>");window.scrollTo(0,0)},error:function(K){}})});a("#delete_profile").on("click",function(e){var f;f=ajaxcalls_vars.admin_url+"admin-ajax.php";var d=jQuery("#wpestate_update_profile_nonce").val();var c=confirm(ajaxcalls_vars.delete_account);if(c){a.ajax({type:"POST",url:f,data:{action:"wpestate_delete_profile",security:d,},success:function(g){window.location="/"},error:function(g){}})}})});function wpestate_add_to_favorites(){jQuery("#add_favorites").on("click",function(c){var a,d;a=jQuery("#add_favorites").attr("data-postid");d=ajaxcalls_vars.admin_url+"admin-ajax.php";var b=jQuery("#wpestate_ajax_filtering").val();if(parseInt(ajaxcalls_vars.userid,10)===0){if(!Modernizr.mq("only all and (max-width: 768px)")){jQuery("#modal_login_wrapper").show();jQuery("#modal_login_wrapper").find("[autofocus]").focus();jQuery("#loginpop").val("1")}else{jQuery(".mobile-trigger-user").trigger("click")}}else{jQuery("#add_favorites").text(ajaxcalls_vars.saving);jQuery.ajax({type:"POST",url:d,dataType:"json",data:{action:"wpestate_ajax_add_fav",post_id:a,security:b},success:function(e){if(e.added){jQuery("#add_favorites").removeClass("isnotfavorite").addClass("isfavorite").attr("data-original-title",ajaxcalls_vars.remove_favorite);jQuery("#add_favorites").html('<i class="fas fa-heart"></i>'+ajaxcalls_vars.favorite)}else{jQuery("#add_favorites").removeClass("isfavorite").addClass("isnotfavorite").attr("data-original-title",ajaxcalls_vars.add_favorite);jQuery("#add_favorites").html('<i class="far fa-heart"></i>'+ajaxcalls_vars.favorite)}},error:function(e){}})}})}function wpestate_theme_slider_show_contact(){jQuery(".wpestate_theme_slider_contact_agent").on("click",function(){var a=jQuery(this).parent().parent();a.find("#show_contact").text(ajaxcalls_vars.contact_agent);a.find(".theme_slider_contact_form_wrapper").show("0").toggleClass("theme_slider_contact_form_wrapper_visible")});jQuery(".theme_slider_details_modal_close").on("click",function(){jQuery(this).parent().removeClass("theme_slider_contact_form_wrapper_visible")});jQuery(".theme_slider_contact_form_wrapper").on("click",function(a){a.stopPropagation()})}function wpestate_enable_schedule_contact(){jQuery(".schedule_meeting").on("click",function(b){var a=jQuery(this).parent();var c=a.find(".schedule_wrapper");a.find(".schedule_wrapper").slideToggle(400,function(){if(c.is(":visible")){c.css("display","flex")}else{c.css("display","none")}})});jQuery(".schedule_day").datepicker({dateFormat:"yy-mm-dd",}).datepicker("widget").wrap('<div class="ll-skin-melon"/>')}function wpestate_agent_submit_email(){jQuery(".wpresidence_elementor_form").on("submit",function(b){b.preventDefault();var a=jQuery(".wpresidence_elementor_form").find(".agent_submit_class_elementor");process_form_submit(a)});jQuery(".agent_submit_class").on("click",function(a){process_form_submit(jQuery(this))})}function process_form_submit(e){var h,b,a,k,f,i,n,q,m;h=e.parent();b=h.find("#agent_contact_name").val();a=h.find("#agent_user_email").val();k=h.find("#agent_phone").val();f=h.find("#agent_comment").val();i=h.find("#agent_id").val();n=h.find("#agent_property_id").val();q=h.find("#agent_property_ajax_nonce").val();m=ajaxcalls_vars.admin_url+"admin-ajax.php";var p=h.find(".schedule_day").val();var c=h.find("#schedule_hour").val();var r=0;if(e.parents(".wpresidence_elementor_form").length){h=e.parents(".wpresidence_elementor_form");b=h.find("#form-field-name").val();a=h.find("#form-field-email").val();f=h.find("#form-field-message").val();q=h.find("#agent_property_ajax_nonce").val();r=h.find("#contact_form_elementor").val();var o=h.find("#wpresidence_form_id").val();var l=h.find("#elementor_email_subject").val();var j;j="";var g=e.parents(".wpresidence_elementor_form");var d=g.find(".elementor-field");d.each(function(){j=j+jQuery(this).attr("name")+": "+jQuery(this).val()+"/n"});f=j+f}if(jQuery("#wpestate_agree_gdpr").length>0){if(!h.find("#wpestate_agree_gdpr").is(":checked")){h.find("#alert-agent-contact").empty().append(ajaxcalls_vars.gdpr_terms);return}}h.find("#alert-agent-contact").empty().append(ajaxcalls_vars.sending);jQuery.ajax({type:"POST",dataType:"json",url:m,data:{action:"wpestate_ajax_agent_contact_form",name:b,email:a,phone:k,comment:f,agent_id:i,propid:n,schedule_day:p,schedule_hour:c,elementor_wpresidence_form_id:o,elementor_email_subject:l,is_elementor:r,nonce:q},success:function(s){if(s.sent){h.find("#agent_contact_name").val("");h.find("#agent_user_email").val("");h.find("#agent_phone").val("");h.find("#agent_comment").val("");h.find(".schedule_day").val("");h.find("#schedule_hour").val("");h.find("#alert-agent-contact").addClass(" wpestate-agent-contact-sent ").empty().append(s.response);if(typeof(d)!=="undefined"){d.each(function(){jQuery(this).val("")})}}else{h.find("#alert-agent-contact").empty().append(s.response)}},error:function(s){}});jQuery.ajax({type:"POST",url:m,data:{action:"wpestate_ajax_agent_contact_form_forcrm",name:b,email:a,phone:k,comment:f,agent_id:i,propid:n,schedule_day:p,schedule_hour:c,nonce:q},success:function(s){},error:function(s){}})}function wpestate_agent_submit_internal_mess(){jQuery(".message_submit").on("click",function(a){if(parseInt(ajaxcalls_vars.userid,10)===0){if(!Modernizr.mq("only all and (max-width: 768px)")){jQuery("#modal_login_wrapper").show();jQuery("#modal_login_wrapper").find("[autofocus]").focus();jQuery("#loginpop").val("1")}else{jQuery(".mobile-trigger-user").trigger("click")}}else{var i=jQuery(this).parent();var h=i.find("#agent_contact_name").val();var l=i.find("#agent_user_email").val();var j=i.find("#agent_phone").val();var k=i.find("#agent_comment").val();var d=i.find("#agent_id").val();var c=i.find("#agent_property_id").val();var f=i.find("#agent_property_ajax_nonce").val();var e=ajaxcalls_vars.admin_url+"admin-ajax.php";var b=i.find("#schedule_day").val();var g=i.find("#schedule_hour").val();i.find("#alert-agent-contact").empty().append(ajaxcalls_vars.sending);jQuery.ajax({type:"POST",dataType:"json",url:e,data:{action:"wpestate_ajax_send_message",name:h,email:l,phone:j,comment:k,agent_id:d,propid:c,schedule_day:b,schedule_hour:g,nonce:f},success:function(m){if(m.sent){i.find("#agent_contact_name").val("");i.find("#agent_user_email").val("");i.find("#agent_phone").val("");i.find("#agent_comment").val("");i.find("#schedule_day").val("");i.find("#schedule_hour").val("")}i.find("#alert-agent-contact").empty().append(m.response)},error:function(m){}})}})};